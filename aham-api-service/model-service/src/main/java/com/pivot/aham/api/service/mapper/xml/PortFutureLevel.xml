<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pivot.aham.api.service.mapper.PortFutureLevelMapper">

    <resultMap id="PortFutureLevelRes" type="com.pivot.aham.api.service.mapper.model.PortFutureLevelPO">
        <result property="id" column="id"/>
        <result property="modelDate" column="model_date"/>
        <result property="rcmd" column="rcmd"/>
        <result property="sixtyEightLow" column="sixty_eight_low"/>
        <result property="sixtyEightUp" column="sixty_eight_up"/>
        <result property="ninetyFiveLow" column="ninety_five_low"/>
        <result property="ninetyFiveUp" column="ninety_five_up"/>
        <result property="status" column="status"/>
        <result property="portfolioId" column="portfolio_id"/>
        <result property="createTime" column="create_time"/>
        <result property="updateTime" column="update_time"/>
    </resultMap>

    <sql id="Columns">
        id,
        model_date,
        rcmd,
        sixty_eight_low,
        sixty_eight_up,
        ninety_five_low,
        ninety_five_up,
        status,
        portfolio_id,
        create_time,
        update_time
    </sql>

    <insert id="insertBatch" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO t_port_future_level
        (
        id,
        model_date,
        rcmd,
        sixty_eight_low,
        sixty_eight_up,
        ninety_five_low,
        ninety_five_up,
        status,
        portfolio_id,
        create_time,
        update_time
        ) VALUES
        <foreach collection="list" item="item" index="index" separator=",">
            (
            #{item.id},
            #{item.modelDate},
            #{item.rcmd},
            #{item.sixtyEightLow},
            #{item.sixtyEightUp},
            #{item.ninetyFiveLow},
            #{item.ninetyFiveUp},
            #{item.status},
            #{item.portfolioId},
            #{item.createTime},
            #{item.updateTime}
            )
        </foreach>
    </insert>

    <update id="updateStatusByIds">
        UPDATE t_port_future_level SET status=0
        WHERE id in
        <foreach collection="portFutureLevelIds" item="item" index="index" open="(" separator="," close=")">
            #{item}
        </foreach>
    </update>

    <select id="listPortFutureLevel" resultMap="PortFutureLevelRes">
        SELECT
        <include refid="Columns"/>
        FROM t_port_future_level
        <where>
            <if test="@Ognl@isNotEmpty(portfolioId)">
                portfolio_id=#{portfolioId}
            </if>
            <if test="@Ognl@isNotEmpty(status)">
                and status=#{status}
            </if>
            <if test="@Ognl@isNotEmpty(modelDate)">
                and model_date=#{modelDate}
            </if>
        </where>
    </select>

</mapper>
