<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pivot.aham.api.service.mapper.AccountDividendMapper">

    <resultMap id="AccountDividendRes" type="com.pivot.aham.api.service.mapper.model.AccountDividendPO">
        <result property="id" column="id"></result>
        <result property="accountId" column="account_id"></result>
        <result property="exDate" column="ex_date"></result>
        <result property="tradeDate" column="trade_date"></result>
        <result property="dividendAmount" column="dividend_amount"></result>
        <result property="navDividendAmount" column="nav_dividend_amount"></result>
        <result property="handelStatus" column="handel_status"></result>
        <result property="caEventTypeID" column="ca_event_type_id"></result>
        <result property="caEventTypeName" column="ca_event_type_name"></result>
        <result property="createTime" column="create_time"></result>
        <result property="updateTime" column="update_time"></result>
        <result property="productCode" column="product_code"></result>
        <result property="dividendOrderId" column="dividend_order_id"></result>
    </resultMap>

    <sql id="baseColum">
        id, account_id, ex_date, trade_date, dividend_amount, nav_dividend_amount, handel_status,
        ca_event_type_id, ca_event_type_name, create_time, update_time, product_code, dividend_order_id
    </sql>

    <insert id="saveAccountDividend" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO t_account_dividend (
        <trim suffixOverrides=",">
            <if test="@Ognl@isNotEmpty(id)">
                id,
            </if>
            <if test="@Ognl@isNotEmpty(accountId)">
                account_id,
            </if>
            <if test="@Ognl@isNotEmpty(productCode)">
                product_code,
            </if>
            <if test="@Ognl@isNotEmpty(dividendOrderId)">
                dividend_order_id,
            </if>
            <if test="@Ognl@isNotEmpty(exDate)">
                ex_date,
            </if>
            <if test="@Ognl@isNotEmpty(tradeDate)">
                trade_date,
            </if>
            <if test="@Ognl@isNotEmpty(dividendAmount)">
                dividend_amount,
            </if>
            <if test="@Ognl@isNotEmpty(navDividendAmount)">
                nav_dividend_amount,
            </if>
            <if test="@Ognl@isNotEmpty(handelStatus)">
                handel_status,
            </if>
            <if test="@Ognl@isNotEmpty(caEventTypeID)">
                ca_event_type_id,
            </if>
            <if test="@Ognl@isNotEmpty(caEventTypeName)">
                ca_event_type_name,
            </if>
            <if test="@Ognl@isNotEmpty(createTime)">
                create_time,
            </if>
            <if test="@Ognl@isNotEmpty(updateTime)">
                update_time,
            </if>
        </trim>
        ) VALUES (
        <trim suffixOverrides=",">
            <if test="@Ognl@isNotEmpty(id)">
                #{id},
            </if>
            <if test="@Ognl@isNotEmpty(accountId)">
                #{accountId},
            </if>
            <if test="@Ognl@isNotEmpty(productCode)">
                #{productCode},
            </if>
            <if test="@Ognl@isNotEmpty(dividendOrderId)">
                #{dividendOrderId},
            </if>
            <if test="@Ognl@isNotEmpty(exDate)">
                #{exDate},
            </if>
            <if test="@Ognl@isNotEmpty(tradeDate)">
                #{tradeDate},
            </if>
            <if test="@Ognl@isNotEmpty(dividendAmount)">
                #{dividendAmount},
            </if>
            <if test="@Ognl@isNotEmpty(navDividendAmount)">
                #{navDividendAmount},
            </if>
            <if test="@Ognl@isNotEmpty(handelStatus)">
                #{handelStatus},
            </if>
            <if test="@Ognl@isNotEmpty(caEventTypeID)">
                #{caEventTypeID},
            </if>
            <if test="@Ognl@isNotEmpty(caEventTypeName)">
                #{caEventTypeName},
            </if>
            <if test="@Ognl@isNotEmpty(createTime)">
                #{createTime},
            </if>
            <if test="@Ognl@isNotEmpty(updateTime)">
                #{updateTime},
            </if>
        </trim>
        )
    </insert>

    <update id="updateAccountDividend">
        UPDATE t_account_dividend
        <set>
            <if test="@Ognl@isNotEmpty(dividendAmount)">
                dividend_amount=#{dividendAmount},
            </if>
            <if test="@Ognl@isNotEmpty(navDividendAmount)">
                nav_dividend_amount=#{navDividendAmount},
            </if>
            <if test="@Ognl@isNotEmpty(handelStatus)">
                handel_status=#{handelStatus},
            </if>
            <if test="@Ognl@isNotEmpty(updateTime)">
                update_time=#{updateTime}
            </if>
        </set>
        <where>
            id=#{id}
        </where>
    </update>

    <select id="queryAccountDividend" resultMap="AccountDividendRes">
        select
        <include refid="baseColum"/>
        from t_account_dividend
        <where>
            <if test="@Ognl@isNotEmpty(dividendOrderId)">
                dividend_order_id=#{dividendOrderId}
            </if>
            <if test="@Ognl@isNotEmpty(accountId)">
                and account_id=#{accountId}
            </if>
            <if test="@Ognl@isNotEmpty(productCode)">
                and product_code=#{productCode}
            </if>
            <if test="@Ognl@isNotEmpty(productCode)">
                and ex_date=#{exDate}
            </if>
        </where>
    </select>

    <select id="listAccountDividend" resultMap="AccountDividendRes">
        select
        <include refid="baseColum"/>
        from t_account_dividend
        <where>
            <if test="@Ognl@isNotEmpty(accountId)">
                account_id=#{accountId}
            </if>
            <if test="@Ognl@isNotEmpty(handelStatus)">
                and handel_status=#{handelStatus}
            </if>
        </where>
    </select>
    <select id="listAccountDividendPage" resultMap="AccountDividendRes">
        select
        <include refid="baseColum"/>
        from t_account_dividend
        <where>
            <if test="@Ognl@isNotEmpty(accountId)">
                account_id=#{accountId}
            </if>
            <if test="@Ognl@isNotEmpty(handelStatus)">
                and handel_status=#{handelStatus}
            </if>

            <if test="@Ognl@isNotEmpty(startTradeDate)">
                and trade_date>=#{startTradeDate}
            </if>

            <if test="@Ognl@isNotEmpty(endTradeDate)">
                and #{endTradeDate}>=trade_date
            </if>
            <if test="@Ognl@isNotEmpty(productCode)">
                and product_code=#{productCode}
            </if>
            <if test="@Ognl@isNotEmpty(likeProductCode)">
                and product_code like CONCAT('%',#{likeProductCode},'%')
            </if>

        </where>
    </select>


</mapper>
